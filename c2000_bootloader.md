CANopen device documentation
============================
**C2000 Bootloader**



|              |                                |
| ------------ | ------------------------------ |
| Project File | c2000_bootloader.xdd           |
| File Version | 1                              |
| Created      | 17/6/2023 7:20:50 pm           |
| Created By   | Sicris Rey Embay               |
| Modified     | 29/5/2024 8:09:28 pm           |
| Modified By  |                                |

This file was automatically generated by [CANopenEditor](https://github.com/CANopenNode/CANopenEditor) v4.1-2-gff637a7

[TOC]


Device Information
------------------
|              |                                |
| ------------ | ------------------------------ |
| Vendor Name  |                                |
| Vendor ID    |                                |
| Product Name | C2000 Bootloader               |
| Product ID   |                                |
| Granularity  | 8                              |
| RPDO count   | 0                              |
| TPDO count   | 0                              |
| LSS Slave    | True                           |
| LSS Master   | False                          |

#### Supported Baud rates
* [ ] 10 kBit/s
* [ ] 20 kBit/s
* [ ] 50 kBit/s
* [x] 125 kBit/s
* [x] 250 kBit/s
* [x] 500 kBit/s
* [ ] 800 kBit/s
* [x] 1000 kBit/s
* [ ] auto


PDO Mapping
-----------

Communication Specific Parameters
---------------------------------

### 0x1000 - Device type
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| VAR         | NMT            | PERSIST_COMM   |

| Data Type               | SDO | PDO | SRDO | Default Value                   |
| ----------------------- | --- | --- | ---- | ------------------------------- |
| UNSIGNED32              | ro  | no  | no   | 0x424F4F54                      |

* bit 16-31: Additional information
* bit 0-15: Device profile number

Value: 0x424F4F54 ("BOOT")

### 0x1001 - Error register
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| VAR         | EM             | RAM            |

| Data Type               | SDO | PDO | SRDO | Default Value                   |
| ----------------------- | --- | --- | ---- | ------------------------------- |
| UNSIGNED8               | ro  | t   | no   | 0x00                            |

* bit 7: manufacturer specific
* bit 6: Reserved (always 0)
* bit 5: device profile specific
* bit 4: communication error (overrun, error state)
* bit 3: temperature
* bit 2: voltage
* bit 1: current
* bit 0: generic error

### 0x1003 - Pre-defined error field
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| ARRAY       |                | RAM            |

| Sub  | Name                  | Data Type  | SDO | PDO | SRDO | Default Value |
| ---- | --------------------- | ---------- | --- | --- | ---- | ------------- |
| 0x00 | Number of errors      | UNSIGNED8  | rw  | no  | no   |               |
| 0x01 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x02 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x03 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x04 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x05 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x06 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x07 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x08 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x09 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x0A | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x0B | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x0C | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x0D | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x0E | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x0F | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |
| 0x10 | Standard error field  | UNSIGNED32 | ro  | no  | no   |               |

* Sub Index 0: Contains number of actual errors. 0 can be written to clear error history.
* sub-index 1 and above:
  * bit 16-31: Manufacturer specific additional information
  * bit 0-15: Error code as transmited in the Emergency object

### 0x1014 - COB-ID EMCY
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| VAR         | EM_PROD        | PERSIST_COMM   |

| Data Type               | SDO | PDO | SRDO | Default Value                   |
| ----------------------- | --- | --- | ---- | ------------------------------- |
| UNSIGNED32              | rw  | no  | no   | $NODEID+0x80                    |

* bit 31: If set, EMCY does NOT exist / is NOT valid
* bit 11-30: set to 0
* bit 0-10: 11-bit CAN-ID

### 0x1015 - Inhibit time EMCY
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| VAR         |                | PERSIST_COMM   |

| Data Type               | SDO | PDO | SRDO | Default Value                   |
| ----------------------- | --- | --- | ---- | ------------------------------- |
| UNSIGNED16              | rw  | no  | no   | 0                               |

Inhibit time of emergency message in multiples of 100Âµs. The value 0 disables the inhibit time.

### 0x1017 - Producer heartbeat time
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| VAR         | HB_PROD        | PERSIST_COMM   |

| Data Type               | SDO | PDO | SRDO | Default Value                   |
| ----------------------- | --- | --- | ---- | ------------------------------- |
| UNSIGNED16              | rw  | no  | no   | 5000                            |

Heartbeat producer time in ms (0 = disable transmission).

### 0x1018 - Identity
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| RECORD      |                | PERSIST_COMM   |

| Sub  | Name                  | Data Type  | SDO | PDO | SRDO | Default Value |
| ---- | --------------------- | ---------- | --- | --- | ---- | ------------- |
| 0x00 | Highest sub-index supported| UNSIGNED8  | ro  | no  | no   | 0x04          |
| 0x01 | Vendor-ID             | UNSIGNED32 | ro  | no  | no   | 0x00000000    |
| 0x02 | Product code          | UNSIGNED32 | ro  | no  | no   | 0x00000000    |
| 0x03 | Revision number       | UNSIGNED32 | ro  | no  | no   | 0x00000000    |
| 0x04 | Serial number         | UNSIGNED32 | ro  | no  | no   | 0x00000000    |

* Vendor-ID, assigned by CiA
* Product code, manufacturer specific
* Revision number:
  * bit 16-31: Major revision number (CANopen behavior has changed)
  * bit 0-15: Minor revision num. (CANopen behavior has not changed)
* Serial number, manufacturer specific
Value: 0x00000000 (Invalid Vendor ID)
This value is determined by C2000 Unique Device Number (refer to SPRACD0B)

### 0x1F50 - Download program data
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| ARRAY       |                | RAM            |

| Sub  | Name                  | Data Type  | SDO | PDO | SRDO | Default Value |
| ---- | --------------------- | ---------- | --- | --- | ---- | ------------- |
| 0x00 | Number of different programs supported| UNSIGNED8  | ro  | no  | no   | 0x01          |
| 0x01 | Program number 1      | DOMAIN     | rw  | no  | no   |               |

### 0x1F51 - Program control
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| ARRAY       |                | RAM            |

| Sub  | Name                  | Data Type  | SDO | PDO | SRDO | Default Value |
| ---- | --------------------- | ---------- | --- | --- | ---- | ------------- |
| 0x00 | Number of different programs on the node| UNSIGNED8  | ro  | no  | no   | 0x01          |
| 0x01 | Program number 1      | UNSIGNED32 | rw  | no  | no   | 0             |

### 0x1F52 - Verify Application Software
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| ARRAY       |                | RAM            |

| Sub  | Name                  | Data Type  | SDO | PDO | SRDO | Default Value |
| ---- | --------------------- | ---------- | --- | --- | ---- | ------------- |
| 0x00 | Highest sub-index supported| UNSIGNED8  | ro  | no  | no   | 0x02          |
| 0x01 | Application software date| UNSIGNED32 | rw  | no  | no   | 0             |
| 0x02 | Application software time| UNSIGNED32 | rw  | no  | no   | 0             |

Manufacturer Specific Parameters
--------------------------------

### 0x2000 - Bootloader
| Object Type | Count Label    | Storage Group  |
| ----------- | -------------- | -------------- |
| ARRAY       |                | RAM            |

| Sub  | Name                  | Data Type  | SDO | PDO | SRDO | Default Value |
| ---- | --------------------- | ---------- | --- | --- | ---- | ------------- |
| 0x00 | Highest sub-index supported| UNSIGNED8  | ro  | no  | no   | 0x02          |
| 0x01 | Command               | UNSIGNED16 | rw  | no  | no   | 0             |
| 0x02 | Erase sector mask     | UNSIGNED16 | rw  | no  | no   | 0x00FE        |

Command Definition:

0x01 : Calculate application CRC
       Invalid CRC results to Abort SDO transfer with error code 0x06060000

0x02 : Jump to application
       This command calculates the application CRC and if valid, jumps to application.
       Invalid CRC results to Abort SDO transfer with error code 0x06060000

0x03 : Erase sector
       This erases the sector/s specified by Erase sector mask (sub-index 0x02).
       Failure results to Abort SDO transfer with error code 0x06060000
       
Flash sector mask definitions

The bit definition below can be used to form a mask specifying which sectors
will be erased by the erase API function.
 
Bit0 = Sector A
Bit1 = Sector B
Bit2 = Sector C
Bit3 = Sector D
Bit4 = Sector E
Bit5 = Sector F
Bit6 = Sector G
Bit7 = Sector H
